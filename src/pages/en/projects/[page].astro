---
import { getCollection } from "astro:content";
import BaseLayout from "../../../layouts/BaseLayout.astro";
import ProjectCard from "../../../components/ProjectCard.astro";
import Pagination from '../../../components/Pagination.astro';
import type { GetStaticPathsOptions } from "astro";

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const projects = (
    await getCollection("projects", ({ id }) => {
      return id.startsWith("en/");
    })
  ).sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());
  return paginate(projects, { pageSize: 6 });
}

const { page } = Astro.props;
const pageDescription = "Production Portfolio";
---

<BaseLayout description={pageDescription}>
  <h1 class="text-3xl font-bold text-center mb-12">Production Portfolio</h1>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {page.data.map((project) => <ProjectCard project={project} />)}
  </div>
  <Pagination page={page} lang="en" />
</BaseLayout>
